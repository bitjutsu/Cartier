!function(t){"use strict";function n(t,n){for(var e=-1,o=Object.keys(n),r=o.length;++e<r;){var i=o[e];t[i]=n[i]}return t}function e(t,n){for(var e={},o=-1,r=t.length;++o<r;)e[t[o]]=n[o];return e}function o(t,n){var e=void 0,o=[];if(!t.global){var e=t.exec(n);return e.shift(),e}do e=t.exec(n),null!=e&&e.length>1&&o.push(e[1]);while(null!=e);return o}function r(t){for(var n=Object.keys(t),e=n.length,o=-1,r={};++o<e;){var a=n[o];r[a]=i(a,t[a])}return r}function i(t,n){var e=a(t),o=u(t);return{params:e,match:o,context:n}}function a(t){var n=new RegExp(/:([^\/]+)/g);return o(n,t)}function u(t){var n=new RegExp(/:[^\/]+/g),e="([^/]+)",o=t.replace(n,e),r="^"+o+"/?$";return new RegExp(r)}function c(t,n,e){"boolean"!=typeof e&&(e=!0),n.state=h(t,n.routes)||void 0,n.context=f(n.state)||n.notFoundContext,n.params=p(t,n.state),s(t,e)}function s(n,e){var o=e?"pushState":"replaceState";t.history[o]({path:n},"",n)}function f(t){return"object"!=typeof t?void 0:t.context}function h(t,n){for(var e=Object.keys(n),o=e.length,r=-1;++r<o;){var i=e[r],a=n[i];if(a.match.test(t))return a}return void 0}function p(t,n){if("object"!=typeof n)return void 0;var r=o(n.match,t);return e(n.params,r)}function v(n){"object"==typeof module?module.exports=n():"function"==typeof define&&define.amd?define("cartier",n):t.cartier=n()}v(function(){function e(n,e){if("function"!=typeof n)throw new TypeError("A context changed handler is required.");this.onContextChange=n,this.notFoundContext=e;var o=this;t.addEventListener("popstate",function(){if(event.state&&event.state.path){var t=o.context;c(event.state.path,o,!1),o.onContextChange(t,o.context,o.params)}})}return n(e.prototype,{route:function(n,e){e=e||this.notFoundContext,this.routes=r(n),this.notFoundContext=e;var o=t.location.pathname;c(o,this,!1),this.onContextChange(null,this.context,this.params)},setNotFoundContext:function(t){this.notFoundContext=t},navigate:function(t){if(!this.routes)throw new Error("Routes are not configured: call route() first.");var n=this.context;c(t,this),this.onContextChange(n,this.context,this.params)}}),e})}(window);