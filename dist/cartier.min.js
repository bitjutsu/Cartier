!function(t){"use strict";function n(t,n){for(var e=-1,o=Object.keys(n),r=o.length;++e<r;){var a=o[e];t[a]=n[a]}return t}function e(t,n){for(var e={},o=-1,r=t.length;++o<r;)e[t[o]]=n[o];return e}function o(t,n){var e=void 0,o=[];if(!t.global){var e=t.exec(n);return e.shift(),e}do e=t.exec(n),null!=e&&e.length>1&&o.push(e[1]);while(null!=e);return o}function r(t){for(var n=Object.keys(t),e=n.length,o=-1,r={};++o<e;){var i=n[o];r[i]=a(i,t[i])}return r}function a(t,n){var e=i(t),o=u(t);return{params:e,match:o,context:n}}function i(t){var n=new RegExp(/:([^\/]+)/g);return o(n,t)}function u(t){var n=new RegExp(/:[^\/]+/g),e="([^/]+)",o=t.replace(n,e),r="^"+o+"/?$";return new RegExp(r)}function c(t,n,e){"boolean"!=typeof e&&(e=!0);var o=t,r=n.context;"/"!=t.substring(0,1)&&(o=window.location.pathname,o+="/"==s(o)?"":"/",o+=t);var a=v(o,n.routes),i=d(o,a);return a===n.state&&f(i,n.params)?void h(o,!1):(n.state=a,n.context=p(a)||n.notFoundContext,n.params=i,h(o,e),void n.onContextChange(r,n.context,n.params))}function f(t,n){if("object"!=typeof t||"object"!=typeof n)return!1;for(var e=Object.keys(t),o=e.length,r=-1;++r<o;){var a=e[r],i=t[a],u=n[a];if(i!=u)return!1}return!0}function s(t){return t.charAt(t.length-1)}function h(n,e){var o=e?"pushState":"replaceState";t.history[o]({path:n},"",n)}function p(t){return"object"!=typeof t?void 0:t.context}function v(t,n){for(var e=Object.keys(n),o=e.length,r=-1;++r<o;){var a=e[r],i=n[a];if(i.match.test(t))return i}return void 0}function d(t,n){if("object"!=typeof n)return void 0;var r=o(n.match,t);return e(n.params,r)}function l(n){"object"==typeof module?module.exports=n():"function"==typeof define&&define.amd?define("cartier",n):t.cartier=n()}l(function(){function e(n,e){if("function"!=typeof n)throw new TypeError("A context changed handler is required.");this.onContextChange=n,this.notFoundContext=e;var o=this;t.addEventListener("popstate",function(t){t.state&&t.state.path&&c(t.state.path,o,!1)}),t.addEventListener("hashchange",function(t){if(t.newURL){var n=t.newURL.split("#!")[1];null!=n&&0!=n.length&&c(n,o,!1)}})}return n(e.prototype,{route:function(n,e){e=e||this.notFoundContext,this.routes=r(n),this.notFoundContext=e;var o=t.location.pathname;c(o,this,!1)},setNotFoundContext:function(t){this.notFoundContext=t},navigate:function(t){if(!this.routes)throw new Error("Routes are not configured: call route() first.");c(t,this)}}),e})}(window);