!function(t){"use strict";function n(t,n){for(var e=-1,o=Object.keys(n),r=o.length;++e<r;){var i=o[e];t[i]=n[i]}return t}function e(t,n){for(var e={},o=-1,r=t.length;++o<r;)e[t[o]]=n[o];return e}function o(t,n){var e=void 0,o=[];if(!t.global){var e=t.exec(n);return e.shift(),e}do e=t.exec(n),null!=e&&e.length>1&&o.push(e[1]);while(null!=e);return o}function r(t){for(var n=Object.keys(t),e=n.length,o=-1,r={};++o<e;){var u=n[o];r[u]=i(u,t[u])}return r}function i(t,n){var e=u(t),o=a(t);return{params:e,match:o,context:n}}function u(t){var n=new RegExp(/:([^\/]+)/g);return o(n,t)}function a(t){var n=new RegExp(/:[^\/]+/g),e="([^/]+)",o=t.replace(n,e),r="^"+o+"/?$";return new RegExp(r)}function c(t,n,e){"boolean"!=typeof e&&(e=!0),n.state=h(t,n.routes)||void 0,n.context=s(n.state)||n.notFoundContext,n.params=p(t,n.state),f(t,e)}function f(n,e){var o=e?"pushState":"replaceState";t.history[o]({path:n},"",n)}function s(t){return"object"!=typeof t?void 0:t.context}function h(t,n){for(var e=Object.keys(n),o=e.length,r=-1;++r<o;){var i=e[r],u=n[i];if(u.match.test(t))return u}return void 0}function p(t,n){if("object"!=typeof n)return void 0;var r=o(n.match,t);return e(n.params,r)}function d(n){"object"==typeof module?module.exports=n():"function"==typeof define&&define.amd?define("cartier",n):t.cartier=n()}d(function(){function e(t,n){if("function"!=typeof t)throw new TypeError("A context changed handler is required.");this.onContextChange=t,this.notFoundContext=n}return n(e.prototype,{route:function(n,e){e=e||this.notFoundContext,this.routes=r(n),this.notFoundContext=e;var o=t.location.pathname;c(o,this,!1),this.onContextChange(null,this.context,this.params)},setNotFoundContext:function(t){this.notFoundContext=t},navigate:function(t){if(!this.routes)throw new Error("Routes are not configured: call route() first.");var n=this.context;c(t,this),this.onContextChange(n,this.context,this.params)}}),e})}(window);